# Copyright (C) 2024 Paranoid Android
# SPDX-License-Identifier: Apache-2.0

on property:sys.perf_profile=1
    write /sys/class/kgsl/kgsl-3d0/force_bus_on 1
    write /sys/class/kgsl/kgsl-3d0/force_clk_on 1
    write /sys/class/kgsl/kgsl-3d0/force_no_nap 1
    write /sys/class/kgsl/kgsl-3d0/force_rail_on 1
    write /sys/class/kgsl/kgsl-3d0/idle_timer 120
    write /sys/class/kgsl/kgsl-3d0/throttling 0
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 1324800
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_min_freq 1324800
    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1804800 6:2304000"
    write /sys/module/cpu_boost/parameters/input_boost_ms 250
    write /sys/class/devfreq/soc:qcom,cpu-llcc-ddr-bw/governor performance
    write /sys/module/lpm_levels/parameters/sleep_disabled 1
    write /proc/sys/kernel/sched_energy_aware 0

on property:sys.perf_profile=0
    write /sys/class/kgsl/kgsl-3d0/force_bus_on 0
    write /sys/class/kgsl/kgsl-3d0/force_clk_on 0
    write /sys/class/kgsl/kgsl-3d0/force_no_nap 0
    write /sys/class/kgsl/kgsl-3d0/force_rail_on 0
    write /sys/class/kgsl/kgsl-3d0/idle_timer 63
    write /sys/class/kgsl/kgsl-3d0/throttling 1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 768000
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_min_freq 806400
    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1324800 6:1324800"
    write /sys/module/cpu_boost/parameters/input_boost_ms 200
    write /sys/class/devfreq/soc:qcom,cpu-llcc-ddr-bw/governor bw_hwmon
    write /sys/module/lpm_levels/parameters/sleep_disabled 0
    write /proc/sys/kernel/sched_energy_aware 1

on property:vendor.post_boot.parsed=1
    write /sys/class/kgsl/kgsl-3d0/force_bus_on 0
    write /sys/class/kgsl/kgsl-3d0/force_clk_on 0
    write /sys/class/kgsl/kgsl-3d0/force_no_nap 0
    write /sys/class/kgsl/kgsl-3d0/force_rail_on 0
    write /sys/class/kgsl/kgsl-3d0/idle_timer 63
    write /sys/class/kgsl/kgsl-3d0/throttling 1
    write /sys/class/devfreq/soc:qcom,cpu-llcc-ddr-bw/governor bw_hwmon
    write /sys/module/lpm_levels/parameters/sleep_disabled 0
